// inspired by http://expressjs.com/en/guide/using-middleware.html

function filterScreenshot( contentFilename ){
	let file = filesWithMetadata[contentFilename]
	if (!file) return

	let contentType = file.contentType

	if ( contentType.includes("image") && contentFilename.startsWith('screenshot_') && contentFilename.endsWith('.jpg') ) {
		console.log('screenshot image', contentFilename)
		let fullPath = contentFilename
		let id = fullPath.replaceAll('.','')
		// get element generated by the previous filter
			// probably too fast
		let elParent = document.getElementById( id )
		let el = document.createElement("a-entity")
		elParent.appendChild( el )
		let elBox = document.createElement("a-box")
		elBox.setAttribute("scale", ".1 .1 .1")
		elBox.setAttribute("wireframe", "true")
		elBox.setAttribute("color", "purple")
		el.appendChild( elBox )
		
	}
	applyNextFilter( contentFilename )
}

sequentialFilters.push( filterScreenshot )
